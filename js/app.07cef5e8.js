(function(e){function t(t){for(var n,i,r=t[0],c=t[1],l=t[2],b=0,d=[];b<r.length;b++)i=r[b],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,r=1;r<o.length;r++){var c=o[r];0!==s[c]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},s={app:0},a=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/SimplePYBotDashboard/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"02f4":function(e,t,o){},"35e3":function(e,t,o){},"37c4":function(e,t,o){"use strict";o("35e3")},5392:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("1da1"),s=(o("e260"),o("e6cf"),o("cca6"),o("a79d"),o("96cf"),o("7a23")),a=Object(s["K"])("data-v-1ee0aeb9");Object(s["t"])("data-v-1ee0aeb9");var i={key:0},r=Object(s["h"])("label",{for:"web-server-url",class:"server-label"},"Web server url:",-1),c=Object(s["h"])("br",null,null,-1),l={key:1},u=Object(s["h"])("label",{for:"robot-ip",class:"server-label"},"Robot IP:",-1),b={key:2},d={key:3},g=Object(s["h"])("br",null,null,-1),p={class:"version-label"},h={key:4,class:"version-label"};Object(s["r"])();var f=a((function(e,t,o,n,f,v){var O=Object(s["z"])("SdkManagement"),j=Object(s["z"])("ServomotorsGroup"),S=Object(s["z"])("CollapsibleBlock"),m=Object(s["z"])("RobotActions"),y=Object(s["z"])("GroundMovements"),k=Object(s["z"])("SensorsGroup");return Object(s["q"])(),Object(s["e"])("div",null,[!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(s["q"])(),Object(s["e"])(S,{key:0,id:"motorsGroup",type:"left-toggle",classes:["top-radius-zero"],class:"home-collapse"},{header:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(s["q"])(),Object(s["e"])(O,{key:0,style:{"margin-left":"15px"},robotConfig:e.robotConfig,robotStatus:e.lastWebSocketStatus?e.lastWebSocketStatus:{},version:e.sdkVersion,webServerUrl:e.webServerUrl},null,8,["robotConfig","robotStatus","version","webServerUrl"])):Object(s["f"])("",!0)]})),default:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable&&e.robotConfig.motors?(Object(s["q"])(),Object(s["e"])(j,{key:0,config:e.robotConfig.motors,motorStatus:e.lastWebSocketStatus.motors?e.lastWebSocketStatus.motors:[],webServerUrl:e.webServerUrl},null,8,["config","motorStatus","webServerUrl"])):Object(s["f"])("",!0)]})),_:1})):Object(s["f"])("",!0),!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(s["q"])(),Object(s["e"])(S,{key:1,id:"robotActions","toggle-text":"Actions and Motion",class:"home-collapse"},{default:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(s["q"])(),Object(s["e"])(m,{key:0,webServerUrl:e.webServerUrl,robotConfig:e.robotConfig,robotStatus:e.lastWebSocketStatus?e.lastWebSocketStatus:{}},null,8,["webServerUrl","robotConfig","robotStatus"])):Object(s["f"])("",!0)]})),_:1})):Object(s["f"])("",!0),!e.loadingRobotConfig&&e.robotConfigAvailable&&!0===e.robotConfig.enable_twist_controller?(Object(s["q"])(),Object(s["e"])(S,{key:2,id:"movements","toggle-text":"Ground movements",class:"home-collapse"},{default:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable&&!0===e.robotConfig.enable_twist_controller?(Object(s["q"])(),Object(s["e"])(y,{key:0,config:{},twistStatus:e.lastWebSocketStatus.twist?e.lastWebSocketStatus.twist:{},webServerUrl:e.webServerUrl},null,8,["twistStatus","webServerUrl"])):Object(s["f"])("",!0)]})),_:1})):Object(s["f"])("",!0),!e.loadingRobotConfig&&e.robotConfigAvailable&&e.robotConfig.sensors?(Object(s["q"])(),Object(s["e"])(S,{key:3,id:"sensors","toggle-text":"Sensors",class:"home-collapse"},{default:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable&&e.robotConfig.sensors?(Object(s["q"])(),Object(s["e"])(k,{key:0,config:e.robotConfig.sensors,sensorsStatus:e.lastWebSocketStatus.sensors?e.lastWebSocketStatus.sensors:[]},null,8,["config","sensorsStatus"])):Object(s["f"])("",!0)]})),_:1})):Object(s["f"])("",!0),Object(s["h"])(S,{id:"configurations",class:"home-collapse",classes:!e.loadingRobotConfig&&e.robotConfigAvailable?[]:["top-radius-zero"],"toggle-text":!e.loadingRobotConfig&&e.robotConfigAvailable?"Configurations":"Dashboard for Simple Python Robot SDK"},{default:a((function(){return[e.onlyIPMode?(Object(s["q"])(),Object(s["e"])("div",l,[u,Object(s["J"])(Object(s["h"])("input",{type:"text",id:"robot-ip","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.robotIP=t}),class:"server-input",placeholder:"Insert your robot IP or hostname",disabled:e.robotConfigAvailable},null,8,["disabled"]),[[s["F"],e.robotIP]]),Object(s["h"])("button",{onClick:t[10]||(t[10]=function(){return v.connectFromIP&&v.connectFromIP.apply(v,arguments)}),disabled:""===e.robotIP,class:"main-button"}," Connect to the robot ",8,["disabled"]),e.onlyIPMode?(Object(s["q"])(),Object(s["e"])("button",{key:0,onClick:t[11]||(t[11]=function(t){return e.onlyIPMode=!1}),class:"main-button"}," More params ")):Object(s["f"])("",!0)])):(Object(s["q"])(),Object(s["e"])("div",i,[r,Object(s["J"])(Object(s["h"])("input",{type:"text",id:"web-server-url","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.webServerUrl=t}),class:"server-input",placeholder:"Insert your robot web server address",disabled:e.robotConfigAvailable},null,8,["disabled"]),[[s["F"],e.webServerUrl]]),e.robotConfigAvailable?(Object(s["q"])(),Object(s["e"])("button",{key:1,onClick:t[3]||(t[3]=function(){return v.closeDashboard&&v.closeDashboard.apply(v,arguments)}),class:"main-button"}," Close dashboard ")):(Object(s["q"])(),Object(s["e"])("button",{key:0,onClick:t[2]||(t[2]=function(){return v.connectToWebServer&&v.connectToWebServer.apply(v,arguments)}),disabled:""===e.webServerUrl,class:"main-button"}," Connect to web server ",8,["disabled"])),e.robotConfigAvailable||e.onlyIPMode?Object(s["f"])("",!0):(Object(s["q"])(),Object(s["e"])("button",{key:2,onClick:t[4]||(t[4]=function(t){return e.onlyIPMode=!0}),class:"main-button"}," Only IP ")),c,Object(s["h"])("label",{for:"web-socket-url",class:"server-label",onClick:t[5]||(t[5]=function(){return v.webSocketLabelClick&&v.webSocketLabelClick.apply(v,arguments)})}," Websocket url: "),Object(s["J"])(Object(s["h"])("input",{type:"text",id:"web-socket-url","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.webSocketUrl=t}),class:"server-input",placeholder:"Insert your robot websocket address",disabled:null!==e.webSocket},null,8,["disabled"]),[[s["F"],e.webSocketUrl]]),null===e.webSocket?(Object(s["q"])(),Object(s["e"])("button",{key:3,onClick:t[7]||(t[7]=function(){return v.connectToWebSocket&&v.connectToWebSocket.apply(v,arguments)}),disabled:""===e.webSocketUrl,class:"main-button"}," Connect to websocket ",8,["disabled"])):(Object(s["q"])(),Object(s["e"])("button",{key:4,onClick:t[8]||(t[8]=function(){return v.closeWebSocket&&v.closeWebSocket.apply(v,arguments)}),class:"main-button"}," Close websocket "))])),e.hideLastWebSocketStatus||null===e.webSocket?Object(s["f"])("",!0):(Object(s["q"])(),Object(s["e"])("div",b,Object(s["B"])(e.lastWebSocketStatus),1)),e.hideLastWebSocketStatus&&null!==e.webSocket&&e.lastWebSocketStatus.system?(Object(s["q"])(),Object(s["e"])("div",d,[(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["x"])(e.lastWebSocketStatus.system,(function(e,t){return Object(s["q"])(),Object(s["e"])("li",{key:t},[Object(s["h"])("b",null,Object(s["B"])(t),1),Object(s["g"])(": "+Object(s["B"])(e),1)])})),128))])):Object(s["f"])("",!0),g,Object(s["h"])("div",p,[Object(s["g"])(" Dashboard version: "+Object(s["B"])(e.appVersion)+" ",1),e.commitSha?(Object(s["q"])(),Object(s["e"])("span",{key:0,onClick:t[12]||(t[12]=function(){return v.setAllCommitSha&&v.setAllCommitSha.apply(v,arguments)})},"- "+Object(s["B"])(e.commitSha),1)):Object(s["f"])("",!0)]),e.sdkVersion?(Object(s["q"])(),Object(s["e"])("div",h," SDK version: "+Object(s["B"])(e.sdkVersion),1)):Object(s["f"])("",!0)]})),_:1},8,["classes","toggle-text"])])})),v=o("5530"),O=(o("b64b"),o("b0c0"),o("5319"),o("ac1f"),o("d3b7"),o("25f0"),Object(s["K"])("data-v-83771490"));Object(s["t"])("data-v-83771490");var j={class:"sdk-toolbar"},S={key:0,class:"toolbar-item"},m={class:"toolbar-item speed"},y={for:"speed-range",class:"speed-lbl"},k={class:"toolbar-item system"},w={key:0},C={key:1},P={key:2};Object(s["r"])();var x=O((function(e,t,o,n,a,i){var r,c,l;return Object(s["q"])(),Object(s["e"])("div",j,[o.robotConfig.name?(Object(s["q"])(),Object(s["e"])("div",S,[Object(s["h"])("b",null,Object(s["B"])(o.robotConfig.name),1)])):Object(s["f"])("",!0),Object(s["h"])("div",m,[Object(s["h"])("label",y,Object(s["B"])(e.rangeSpeed),1),Object(s["J"])(Object(s["h"])("input",{id:"speed-range",class:"speed-range","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.rangeSpeed=t}),disabled:e.pending,type:"range",min:"0.1",max:"5",step:"0.1",onChange:t[2]||(t[2]=function(){return i.rangeSpeedChanged&&i.rangeSpeedChanged.apply(i,arguments)}),onFocusin:t[3]||(t[3]=function(t){return e.rangeSpeedDrag=!0}),onFocusout:t[4]||(t[4]=function(t){return e.rangeSpeedDrag=!1})},null,40,["disabled"]),[[s["F"],e.rangeSpeed]])]),Object(s["h"])("div",k,[null!==(r=o.robotStatus.system)&&void 0!==r&&r.temperature?(Object(s["q"])(),Object(s["e"])("span",w,Object(s["B"])((null===(c=o.robotStatus.system)||void 0===c?void 0:c.temperature)+"Â°C - "),1)):Object(s["f"])("",!0),null!==(l=o.robotStatus.system)&&void 0!==l&&l.timestamp?(Object(s["q"])(),Object(s["e"])("span",C,"(Delay:"+Object(s["B"])(e.statusDelay)+" sec) - "+Object(s["B"])(e.formattedDate),1)):(Object(s["q"])(),Object(s["e"])("span",P,"Connect with websocket to receive realtime data"))])])})),_=(o("b680"),{name:"SdkManagement",props:{webServerUrl:{type:String,required:!0},robotConfig:{type:Object,required:!0},robotStatus:{type:Object,required:!0},version:{type:String,default:""}},data:function(){return{currentSpeed:1,rangeSpeed:1,rangeSpeedDrag:!1,pending:!1,formattedDate:"",statusDelay:0}},mounted:function(){var e;this.currentSpeed=null===(e=this.robotStatus.sdk)||void 0===e?void 0:e.robot_speed,this.rangeSpeed=this.currentSpeed?this.currentSpeed:1},methods:{rangeSpeedChanged:function(){var e=this;this.pending=!0;var t={robot_speed:parseFloat(this.rangeSpeed)};this.axios.patch(this.webServerUrl+"/sdk/",t).then((function(t){200!==t.status&&(e.$toast.error("Failed to change speed to "+e.rangeSpeed+". Bad response"),e.rangeSpeed=e.currentSpeed),e.pending=!1})).catch((function(){e.$toast.error("Failed to change speed to "+e.rangeSpeed),e.rangeSpeed=e.currentSpeed,e.pending=!1}))}},watch:{robotStatus:function(){var e,t,o;if(this.currentSpeed=null===(e=this.robotStatus.sdk)||void 0===e?void 0:e.robot_speed,this.currentSpeed&&!this.rangeSpeedDrag&&(this.rangeSpeed=parseFloat(this.currentSpeed)),null!==(t=this.robotStatus)&&void 0!==t&&null!==(o=t.system)&&void 0!==o&&o.timestamp){var n=new Date(this.robotStatus.system.timestamp);this.statusDelay=((Date.now()-n)/1e3).toFixed(3),this.formattedDate=("0"+n.getHours()).substr(-2)+":"+("0"+n.getMinutes()).substr(-2)+":"+("0"+n.getSeconds()).substr(-2)+":"+(n.getMilliseconds()+"000").substr(0,3)}}}}),q=(o("acc6"),o("d959")),V=o.n(q);const I=V()(_,[["render",x],["__scopeId","data-v-83771490"]]);var M=I,U=(o("7db0"),Object(s["K"])("data-v-66a1be8d"));Object(s["t"])("data-v-66a1be8d");var A={class:"servomotor-group-container"};Object(s["r"])();var $=U((function(e,t,o,n,a,i){var r=Object(s["z"])("ServoMotor");return Object(s["q"])(),Object(s["e"])("div",A,[(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["x"])(o.config,(function(e,t,n){return Object(s["q"])(),Object(s["e"])(r,{class:["servomotor",{"servomotor-big":0===n&&Object.keys(o.config).length%2===1}],key:t,webServerUrl:o.webServerUrl,config:e,motorKey:t,socketGoalValue:o.motorStatus.find((function(e){return e.key===t}))?o.motorStatus.find((function(e){return e.key===t})).goal_angle:0,socketCurrentValue:o.motorStatus.find((function(e){return e.key===t}))?o.motorStatus.find((function(e){return e.key===t})).current_angle:null},null,8,["class","webServerUrl","config","motorKey","socketGoalValue","socketCurrentValue"])})),128))])})),T=Object(s["K"])("data-v-b954b35a");Object(s["t"])("data-v-b954b35a");var W={class:"servomotor"},B={class:"infos no-select"},G={class:"info-title allow-select tooltip"},F={key:0,class:"tooltip-text"},D=Object(s["g"])(" | "),J={class:"info-angle"},L={class:"inputs-row no-select"},R={class:"inputs-wrap"},z=Object(s["h"])("label",{class:"sr-only",for:"goal"},null,-1),K=Object(s["h"])("label",{class:"sr-only",for:"current"},null,-1);Object(s["r"])();var N=T((function(e,t,o,n,a,i){return Object(s["q"])(),Object(s["e"])("div",W,[Object(s["h"])("div",B,[Object(s["h"])("button",{disabled:e.pending||parseInt(o.config.angle_limit[0])>parseInt(e.rangeGoalAngle)-e.stepValue,onClick:t[1]||(t[1]=function(t){return i.removeStep(e.stepValue)})},"-"+Object(s["B"])(e.stepValue),9,["disabled"]),Object(s["h"])("button",{disabled:e.pending||parseInt(o.config.angle_limit[0])>parseInt(e.rangeGoalAngle)-e.stepValueSmall,onClick:t[2]||(t[2]=function(t){return i.removeStep(e.stepValueSmall)})},"-"+Object(s["B"])(e.stepValueSmall),9,["disabled"]),Object(s["h"])("span",G,[Object(s["g"])(Object(s["B"])(o.config.display_key?o.config.display_key:o.motorKey)+" ",1),o.config.label?(Object(s["q"])(),Object(s["e"])("span",F,Object(s["B"])(o.config.label?o.config.label:""),1)):Object(s["f"])("",!0)]),D,Object(s["h"])("span",J,Object(s["B"])(e.rangeGoalAngle),1),o.config.angle_limit[0]<=0&&o.config.angle_limit[1]>=0?(Object(s["q"])(),Object(s["e"])("button",{key:0,disabled:e.pending||0===parseInt(e.rangeGoalAngle),onClick:t[3]||(t[3]=function(){return i.goToZero&&i.goToZero.apply(i,arguments)})},"0 ",8,["disabled"])):Object(s["f"])("",!0),Object(s["h"])("button",{disabled:e.pending||parseInt(o.config.angle_limit[1])<parseInt(e.rangeGoalAngle)+e.stepValueSmall,onClick:t[4]||(t[4]=function(t){return i.addStep(e.stepValueSmall)})},"+"+Object(s["B"])(e.stepValueSmall),9,["disabled"]),Object(s["h"])("button",{disabled:e.pending||parseInt(o.config.angle_limit[1])<parseInt(e.rangeGoalAngle)+e.stepValue,onClick:t[5]||(t[5]=function(t){return i.addStep(e.stepValue)})},"+"+Object(s["B"])(e.stepValue),9,["disabled"])]),Object(s["h"])("div",L,[Object(s["h"])("div",{class:"input-limit",onClick:t[6]||(t[6]=function(){return i.goToMin&&i.goToMin.apply(i,arguments)})},Object(s["B"])(o.config.angle_limit[0]),1),Object(s["h"])("div",R,[z,Object(s["J"])(Object(s["h"])("input",{id:"goal",class:"goal-input",type:"range",onChange:t[7]||(t[7]=function(){return i.rangeGoalChanged&&i.rangeGoalChanged.apply(i,arguments)}),min:o.config.angle_limit[0],"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.rangeGoalAngle=t}),max:o.config.angle_limit[1],step:1},null,40,["min","max"]),[[s["F"],e.rangeGoalAngle]]),K,null!=o.socketCurrentValue?Object(s["J"])((Object(s["q"])(),Object(s["e"])("input",{key:0,id:"current",class:"current-input",type:"range",disabled:"",min:o.config.angle_limit[0],"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.rangeCurrentAngle=t}),max:o.config.angle_limit[1],step:1},null,8,["min","max"])),[[s["F"],e.rangeCurrentAngle]]):Object(s["f"])("",!0)]),Object(s["h"])("div",{class:"input-limit",onClick:t[10]||(t[10]=function(){return i.goToMax&&i.goToMax.apply(i,arguments)})},Object(s["B"])(o.config.angle_limit[1]),1)])])})),E={name:"ServoMotor",props:{webServerUrl:{type:String,required:!0},config:{type:Object,required:!0},motorKey:{required:!0},socketGoalValue:{default:0},socketCurrentValue:{default:0}},data:function(){return{rangeCurrentAngle:0,rangeGoalAngle:0,stepValueSmall:1,stepValue:5,pending:!1}},mounted:function(){this.rangeGoalAngle=this.socketGoalValue,this.rangeCurrentAngle=this.socketCurrentValue},methods:{rangeGoalChanged:function(){var e=this;this.pending=!0;var t=parseInt(this.rangeGoalAngle);if(console.log(this.motorKey,t),this.$robotConfig.get()["enable_parser_json_commands"]&&this.$webSocket.isOpen()){var o={type:"C2R",data:{area:"motors",commands:[{key:this.motorKey,action:"set_goal_angle",goal_angle:t}]}};return this.$webSocket.send(o),void(this.pending=!1)}var n={goal_angle:t};this.axios.patch(this.webServerUrl+"/motors/"+this.motorKey+"/",n).then((function(o){200!==o.status&&e.$toast.error("Failed to move "+e.motorKey+" to "+t+". Bad response"),e.pending=!1})).catch((function(){e.$toast.error("Failed to move "+e.motorKey+" to "+t),e.pending=!1}))},goToZero:function(){this.rangeGoalAngle=0,this.rangeGoalChanged()},removeStep:function(e){this.rangeGoalAngle=parseInt(this.rangeGoalAngle)-e,this.rangeGoalChanged()},addStep:function(e){this.rangeGoalAngle=parseInt(this.rangeGoalAngle)+e,this.rangeGoalChanged()},goToMin:function(){this.pending||this.rangeGoalAngle===this.config.angle_limit[0]||(this.rangeGoalAngle=this.config.angle_limit[0],this.rangeGoalChanged())},goToMax:function(){this.pending||this.rangeGoalAngle===this.config.angle_limit[1]||(this.rangeGoalAngle=this.config.angle_limit[1],this.rangeGoalChanged())}},watch:{socketGoalValue:function(){this.rangeGoalAngle=this.socketGoalValue},socketCurrentValue:function(){this.rangeCurrentAngle=this.socketCurrentValue}}};o("648d");const Y=V()(E,[["render",N],["__scopeId","data-v-b954b35a"]]);var X=Y,Z={name:"ServomotorsGroup",components:{ServoMotor:X},props:{webServerUrl:{type:String,required:!0},config:{type:Object,required:!0},motorStatus:{type:Array,required:!0}}};o("e11a");const Q=V()(Z,[["render",$],["__scopeId","data-v-66a1be8d"]]);var H=Q,ee=Object(s["K"])("data-v-7d9e03a8");Object(s["t"])("data-v-7d9e03a8");var te={class:"sensors-group-container"};Object(s["r"])();var oe=ee((function(e,t,o,n,a,i){return Object(s["q"])(),Object(s["e"])("div",te,[(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["x"])(o.config,(function(e,t){return Object(s["q"])(),Object(s["e"])("div",{class:"sensors",key:t},[Object(s["h"])("b",null,Object(s["B"])(t),1),Object(s["g"])(": "+Object(s["B"])(o.sensorsStatus.find((function(e){return e.key===t}))?o.sensorsStatus.find((function(e){return e.key===t})).value:"-"),1)])})),128))])})),ne={name:"SensorsGroup",props:{config:{type:Object,required:!0},sensorsStatus:{type:Array,required:!0}}};o("d688");const se=V()(ne,[["render",oe],["__scopeId","data-v-7d9e03a8"]]);var ae=se,ie=Object(s["K"])("data-v-4d3601b7");Object(s["t"])("data-v-4d3601b7");var re={class:"robot-actions"},ce={key:0,class:"robot-actions-item robot-poses"},le=Object(s["h"])("div",{class:"robot-actions-item-title"},"Poses:",-1),ue=Object(s["h"])("option",{disabled:"",value:"__no_pose"},"Poses",-1),be=Object(s["h"])("option",{value:"__new_pose"},"--- new pose ---",-1),de={style:{"margin-top":"2px"}},ge={key:1,class:"robot-actions-item"},pe=Object(s["h"])("div",{class:"robot-actions-item-title"},"Point to point:",-1),he={class:"ptp-value"},fe=Object(s["h"])("br",null,null,-1),ve={class:"robot-actions-item custom-buttons"};Object(s["r"])();var Oe=ie((function(e,t,o,n,a,i){return Object(s["q"])(),Object(s["e"])("div",re,[e.motionConfig.poses?(Object(s["q"])(),Object(s["e"])("div",ce,[le,Object(s["h"])("label",null,[Object(s["J"])(Object(s["h"])("select",{onChange:t[1]||(t[1]=function(){return i.changePtoPValues&&i.changePtoPValues.apply(i,arguments)}),"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedPose=t}),style:{"min-width":"220px"}},[ue,(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["x"])(e.motionConfig.poses,(function(e,t){return Object(s["q"])(),Object(s["e"])("option",{key:t,value:t},Object(s["B"])(t),9,["value"])})),128)),be],544),[[s["E"],e.selectedPose]])]),Object(s["h"])("label",de,[""!==e.selectedPose&&"__new_pose"!==e.selectedPose?Object(s["J"])((Object(s["q"])(),Object(s["e"])("input",{key:0,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.poseSeconds=t}),class:"robot-actions-input",type:"number",min:"0",max:"30",placeholder:"seconds"},null,512)),[[s["F"],e.poseSeconds]]):Object(s["f"])("",!0)]),""!==e.selectedPose&&"__new_pose"!==e.selectedPose?(Object(s["q"])(),Object(s["e"])("button",{key:0,onClick:t[4]||(t[4]=function(){return i.goToPose&&i.goToPose.apply(i,arguments)}),disabled:e.pending}," Go to "+Object(s["B"])(e.selectedPose)+" in "+Object(s["B"])(e.poseSeconds)+" seconds ",9,["disabled"])):Object(s["f"])("",!0),""!==e.selectedPose&&"__new_pose"!==e.selectedPose?(Object(s["q"])(),Object(s["e"])("button",{key:1,onClick:t[5]||(t[5]=function(t){return i.deletePose(e.selectedPose)})},"Delete pose ")):Object(s["f"])("",!0)])):Object(s["f"])("",!0),"__new_pose"===e.selectedPose?(Object(s["q"])(),Object(s["e"])("div",ge,[pe,Object(s["h"])("label",null,[(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["x"])(o.robotConfig.motors,(function(t,o){return Object(s["q"])(),Object(s["e"])("div",{key:o},[Object(s["h"])("span",he,Object(s["B"])(void 0!==e.pointToPointMotors[o]?e.pointToPointMotors[o]:"-"),1),Object(s["J"])(Object(s["h"])("input",{type:"checkbox",id:o,"onUpdate:modelValue":function(t){return e.enabledMotors[o]=t}},null,8,["id","onUpdate:modelValue"]),[[s["D"],e.enabledMotors[o]]]),Object(s["h"])("label",{for:o},Object(s["B"])(o),9,["for"])])})),128)),Object(s["h"])("button",{onClick:t[6]||(t[6]=function(){return i.enableAllMotors&&i.enableAllMotors.apply(i,arguments)})},"Select all"),Object(s["h"])("button",{onClick:t[7]||(t[7]=function(){return i.disableAllMotors&&i.disableAllMotors.apply(i,arguments)})},"Unselect all")]),Object(s["h"])("div",null,[Object(s["h"])("label",null,["__new_pose"===e.selectedPose?Object(s["J"])((Object(s["q"])(),Object(s["e"])("input",{key:0,type:"text","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.newPoseName=t}),placeholder:"New pose name"},null,512)),[[s["F"],e.newPoseName]]):Object(s["f"])("",!0)]),Object(s["h"])("button",{onClick:t[9]||(t[9]=function(){return i.copyCurrentPosition&&i.copyCurrentPosition.apply(i,arguments)}),disabled:e.pending}," Copy current position ",8,["disabled"]),""!==e.pointToPointMotors&&""!==e.selectedPose?(Object(s["q"])(),Object(s["e"])("button",{key:0,onClick:t[10]||(t[10]=function(){return i.saveCurrentPosition&&i.saveCurrentPosition.apply(i,arguments)}),disabled:e.pending||""===e.newPoseName}," Save current position ",8,["disabled"])):Object(s["f"])("",!0),fe,Object(s["h"])("label",null,[""!==e.pointToPointMotors?Object(s["J"])((Object(s["q"])(),Object(s["e"])("input",{key:0,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.pointToPointSeconds=t}),class:"robot-actions-input",type:"number",min:"0",max:"30",placeholder:"seconds"},null,512)),[[s["F"],e.pointToPointSeconds]]):Object(s["f"])("",!0)]),""!==e.pointToPointMotors?(Object(s["q"])(),Object(s["e"])("button",{key:1,onClick:t[12]||(t[12]=function(){return i.movePointToPoint&&i.movePointToPoint.apply(i,arguments)}),disabled:e.pending}," Move point to point in "+Object(s["B"])(e.pointToPointSeconds)+" seconds ",9,["disabled"])):Object(s["f"])("",!0)])])):Object(s["f"])("",!0),Object(s["h"])("div",ve,[Object(s["h"])("button",{onClick:t[13]||(t[13]=function(e){return i.sendCustom(1)}),disabled:e.pending}," Custom1 ",8,["disabled"]),Object(s["h"])("button",{onClick:t[14]||(t[14]=function(e){return i.sendCustom(2)}),disabled:e.pending}," Custom2 ",8,["disabled"]),Object(s["h"])("button",{onClick:t[15]||(t[15]=function(e){return i.sendCustom(3)}),disabled:e.pending}," Custom3 ",8,["disabled"]),Object(s["h"])("button",{onClick:t[16]||(t[16]=function(e){return i.sendCustom(4)}),disabled:e.pending}," Custom4 ",8,["disabled"]),Object(s["h"])("button",{onClick:t[17]||(t[17]=function(e){return i.sendCustom(5)}),disabled:e.pending}," Custom5 ",8,["disabled"])])])})),je=o("3835"),Se=(o("4fad"),o("a1e9")),me={name:"RobotActions",props:{webServerUrl:{type:String,required:!0},robotConfig:{type:Object,required:!0},robotStatus:{type:Object,required:!0}},data:function(){return{motionConfig:{},selectedPose:"",newPoseName:"",enabledMotors:{},poseSeconds:1,pointToPointMotors:"",pointToPointSeconds:1,pending:!1}},mounted:function(){this.getMotionInfo(),this.enableAllMotors()},methods:{getMotionInfo:function(){var e=this;this.robotConfig.poses&&(this.motionConfig.poses=this.robotConfig.poses),this.axios.get(this.webServerUrl+"/motion/").then((function(t){200===t.status?e.motionConfig=t.data:e.$toast.error("Bad response from "+e.webServerUrl+"/motion/. Code "+t.status)})).catch((function(){}))},sendCustom:function(e){var t=this;this.pending=!0;var o={command:"custom"+e.toString()};this.axios.post(this.webServerUrl+"/custom/",o).then((function(o){200!==o.status&&t.$toast.error("Failed to send custom"+e.toString()),t.pending=!1})).catch((function(){t.$toast.error("Failed to send custom"+e.toString()),t.pending=!1}))},goToPose:function(){var e=this;""===this.poseSeconds&&(this.poseSeconds=0);var t=this.selectedPose;this.pending=!0;var o={seconds:parseFloat(this.poseSeconds)};this.axios.post(this.webServerUrl+"/go-to-pose/"+t+"/",o).then((function(o){200!==o.status&&e.$toast.error("Failed to go to pose "+t+". Bad response"),e.selectedPose="",e.pending=!1})).catch((function(){e.$toast.error("Failed to go to pose "+t),e.pending=!1}))},movePointToPoint:function(){var e=this;""===this.pointToPointSeconds&&(this.pointToPointSeconds=0),this.pending=!0;var t=Object(v["a"])({seconds:parseFloat(this.pointToPointSeconds)},JSON.parse(JSON.stringify(this.pointToPointMotors,null,2)));this.axios.post(this.webServerUrl+"/move-point-to-point/",t).then((function(t){200!==t.status&&e.$toast.error("Failed to move point to point. Bad response"),e.pending=!1})).catch((function(){e.$toast.error("Failed to go to move point to point"),e.pending=!1}))},copyCurrentPosition:function(){for(var e=Object(Se["o"])(this.robotStatus),t=Object(Se["o"])(this.robotConfig)["motors"],o={},n=function(){var t=Object(je["a"])(a[s],1),n=t[0];e["motors"]&&e["motors"].find((function(e){return e.key===n})).goal_angle?o[n]=e["motors"].find((function(e){return e.key===n})).goal_angle:o[n]=0},s=0,a=Object.entries(t);s<a.length;s++)n();this.pointToPointMotors=o},saveCurrentPosition:function(){var e=this,t={};try{for(var o=0,n=Object.entries(this.pointToPointMotors);o<n.length;o++){var s=Object(je["a"])(n[o],2),a=s[0],i=s[1];this.enabledMotors[a]&&(t[a]=i)}}catch(c){return void this.$toast.warning("Insert a valid JSON")}if(0!==Object.entries(t).length){var r=this.newPoseName;""!==r?(this.pending=!0,this.axios.post(this.webServerUrl+"/poses/"+r+"/",t).then((function(t){200!==t.status?e.$toast.error("Failed to save current position. Bad response"):(e.$toast.success("Saved current position"),e.selectedPose=r,e.newPoseName=""),e.pending=!1,e.getMotionInfo()})).catch((function(){e.$toast.error("Failed to save current position"),e.pending=!1}))):this.$toast.warning("Insert a valid name")}else this.$toast.warning("Insert at least 1 servo")},changePtoPValues:function(){""!==this.selectedPose&&"__new_pose"===this.selectedPose&&this.copyCurrentPosition()},deletePose:function(){var e=this,t=this.selectedPose;confirm("Are you sure to delete the pose "+t+"?")&&(this.pending=!0,this.axios.delete(this.webServerUrl+"/poses/"+t+"/").then((function(o){200!==o.status?e.$toast.error("Failed to delete pose "+t+". Bad response"):e.$toast.success("Deleted pose "+t),e.pending=!1,e.getMotionInfo(),e.selectedPose=""})).catch((function(){e.$toast.error("Failed to delete pose "+t),e.pending=!1})))},enableAllMotors:function(){for(var e=0,t=Object.entries(this.robotConfig.motors);e<t.length;e++){var o=Object(je["a"])(t[e],1),n=o[0];this.enabledMotors[n]=!0}},disableAllMotors:function(){for(var e=0,t=Object.entries(this.robotConfig.motors);e<t.length;e++){var o=Object(je["a"])(t[e],1),n=o[0];this.enabledMotors[n]=!1}},isJsonString:function(e){try{JSON.parse(e)}catch(t){return!1}return!0}}};o("37c4");const ye=V()(me,[["render",Oe],["__scopeId","data-v-4d3601b7"]]);var ke=ye,we=Object(s["K"])("data-v-78c3c49d");Object(s["t"])("data-v-78c3c49d");var Ce={class:"collapsible-block"},Pe={class:"collapsible-content"},xe={class:"content-inner"};Object(s["r"])();var _e=we((function(e,t,o,n,a,i){return Object(s["q"])(),Object(s["e"])("div",Ce,[Object(s["h"])("input",{id:o.id,class:"toggle",type:"checkbox",checked:o.checked},null,8,["id","checked"]),"lbl-toggle-text"===o.type?(Object(s["q"])(),Object(s["e"])("label",{key:0,for:o.id,class:["lbl-toggle",[o.type,o.classes]]},Object(s["B"])(o.toggleText),11,["for"])):Object(s["f"])("",!0),"left-toggle"===o.type?(Object(s["q"])(),Object(s["e"])("label",{key:1,for:o.id,class:["lbl-toggle",[o.type,o.classes]]},[Object(s["y"])(e.$slots,"header",{},void 0,!0)],10,["for"])):Object(s["f"])("",!0),Object(s["h"])("div",Pe,[Object(s["h"])("div",xe,[Object(s["y"])(e.$slots,"default",{},void 0,!0)])])])})),qe={name:"CollapsibleBlock",props:{id:{type:String,required:!0},checked:{type:Boolean,default:!0},type:{type:String,default:"lbl-toggle-text"},toggleText:{type:String,default:"Toggle"},classes:{type:Array,default:function(){return[]}}}};o("b3b3");const Ve=V()(qe,[["render",_e],["__scopeId","data-v-78c3c49d"]]);var Ie=Ve,Me=Object(s["K"])("data-v-78e9bcf8");Object(s["t"])("data-v-78e9bcf8");var Ue={class:"movements"},Ae={class:"left-area"},$e={class:"area-group"},Te=Object(s["h"])("div",{class:"axis-label"},"Joystick X:",-1),We={class:"axis-value"},Be={class:"area-group"},Ge=Object(s["h"])("div",{class:"axis-label"},"Joystick Y:",-1),Fe={class:"axis-value"},De={class:"area-group"},Je=Object(s["h"])("div",{class:"axis-label"},"Orientation Z:",-1),Le={class:"axis-value"},Re={class:"right-area data-area"},ze={class:"area-group"},Ke=Object(s["h"])("div",{class:"data-label"},"Linear:",-1),Ne={class:"data-value"},Ee={class:"area-group data-area"},Ye=Object(s["h"])("div",{class:"data-label"},"Angular:",-1),Xe={class:"data-value"};Object(s["r"])();var Ze=Me((function(e,t,o,n,a,i){var r=Object(s["z"])("Joystick");return Object(s["q"])(),Object(s["e"])("div",Ue,[Object(s["h"])("div",Ae,[Object(s["h"])("div",$e,[Te,Object(s["h"])("div",We,Object(s["B"])(e.joystickValue.x?e.joystickValue.x:0),1)]),Object(s["h"])("div",Be,[Ge,Object(s["h"])("div",Fe,Object(s["B"])(e.joystickValue.y?e.joystickValue.y:0),1)]),Object(s["h"])("div",De,[Je,Object(s["h"])("div",Le,Object(s["B"])(e.zValue),1)])]),Object(s["h"])(r,{class:"joystick-container",idx:"controller1",onChange:i.change},null,8,["onChange"]),Object(s["h"])("div",Re,[Object(s["h"])("div",ze,[Ke,Object(s["h"])("div",Ne,Object(s["B"])(o.twistStatus.linear?o.twistStatus.linear:"-"),1)]),Object(s["h"])("div",Ee,[Ye,Object(s["h"])("div",Xe,Object(s["B"])(o.twistStatus.angular?o.twistStatus.angular:"-"),1)])])])})),Qe=(o("a434"),o("159b"),{style:{width:"128px",position:"relative"}}),He=Object(s["h"])("img",{src:"images/joystick-base.png",alt:""},null,-1),et=Object(s["h"])("img",{src:"images/joystick-red.png",alt:""},null,-1);function tt(e,t,o,n,a,i){return Object(s["q"])(),Object(s["e"])("div",{id:"joystick_"+o.idx},[Object(s["h"])("div",Qe,[He,Object(s["h"])("div",{id:o.idx+"_stick",style:{position:"absolute",left:"32px",top:"32px"}},[et],8,["id"])])],8,["id"])}var ot=o("d4ec"),nt=(o("4057"),o("99af"),o("a9e3"),function e(t,o,n){Object(ot["a"])(this,e),this.id=t;var s=document.getElementById(t);this.dragStart=null,this.touchId=null,this.active=!1,this.value={x:0,y:0};var a=this;function i(e){a.active=!0,s.style.transition="0s",e.preventDefault(),e.changedTouches?a.dragStart={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:a.dragStart={x:e.clientX,y:e.clientY},e.changedTouches&&(a.touchId=e.changedTouches[0].identifier)}function r(e){if(a.active){var t=null;if(e.changedTouches){for(var i=0;i<e.changedTouches.length;i++)a.touchId===e.changedTouches[i].identifier&&(t=i,e.clientX=e.changedTouches[i].clientX,e.clientY=e.changedTouches[i].clientY);if(null==t)return}var r=e.clientX-a.dragStart.x,c=e.clientY-a.dragStart.y,l=Math.atan2(c,r),u=Math.min(o,Math.hypot(r,c)),b=u*Math.cos(l),d=u*Math.sin(l);s.style.transform="translate3d(".concat(b,"px, ").concat(d,"px, 0px)");var g=u<n?0:o/(o-n)*(u-n),p=g*Math.cos(l),h=g*Math.sin(l),f=parseFloat((p/o).toFixed(3)),v=parseFloat((h/o).toFixed(3));a.value={x:f,y:-v}}}function c(e){a.active&&(e.changedTouches&&a.touchId!==e.changedTouches[0].identifier||(s.style.transition="0.2s",s.style.transform="translate3d(0px, 0px, 0px)",a.value={x:0,y:0},a.touchId=null,a.active=!1))}s.addEventListener("mousedown",i),s.addEventListener("touchstart",i),document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("mouseup",c),document.addEventListener("touchend",c)}),st={name:"Joystick",props:{idx:{type:String,required:!0},refreshInterval:{type:Number,default:250}},data:function(){return{joystick1:null,lastValue:{},value:{},lastChanged:(new Date).valueOf()+1e3}},mounted:function(){console.log("Joystick "+this.idx+" mounted"),this.joystick1=new nt(this.idx+"_stick",52,3),this.lastValue=this.joystick1.value,this.value=this.lastValue,this.joystickLoop()},methods:{update:function(){this.lastValue=this.joystick1.value,this.lastValue!==this.value&&this.lastChanged+this.refreshInterval<(new Date).valueOf()?(this.lastChanged=(new Date).valueOf(),this.value=this.lastValue,this.$emit("change",this.value)):0!==this.lastValue.x||0!==this.lastValue.y||this.value.x===this.lastValue.x&&this.value.y===this.lastValue.y||(this.lastChanged=(new Date).valueOf(),this.value=this.lastValue,this.$emit("change",this.value))},joystickLoop:function(){requestAnimationFrame(this.joystickLoop),this.update()}}};const at=V()(st,[["render",tt]]);var it=at,rt={name:"GroundMovements",components:{Joystick:it},props:{webServerUrl:{type:String,required:!0},config:{type:Object,required:!0},twistStatus:{type:Object,required:!0}},data:function(){return{joystick1:null,joystickValue:{},zValue:0,pending:!1,keysDown:[]}},mounted:function(){this.setKeyboardListener(),this.syncControllers()},methods:{setKeyboardListener:function(){var e=this;window.addEventListener("keydown",(function(t){var o=t.key.toLowerCase();if("a"===o||"s"===o||"d"===o||"w"===o||"z"===o||"x"===o){var n=e.keysDown.indexOf(o);-1===n&&(e.keysDown.push(t.key.toLowerCase()),e.calcJoystickWithKeys())}})),window.addEventListener("keyup",(function(t){var o=e.keysDown.indexOf(t.key.toLowerCase());-1!==o&&(e.keysDown.splice(o,1),e.calcJoystickWithKeys())}))},calcJoystickWithKeys:function(){var e=this,t={x:0,y:0};this.keysDown.forEach((function(o){"a"===o&&(t.x=-1),"s"===o&&(t.y=-1),"d"===o&&(t.x=1),"w"===o&&(t.y=1),"z"===o&&(e.zValue=(e.zValue+10)%360),"x"===o&&(e.zValue=(e.zValue-10)%360),e.zValue<0&&(e.zValue=360+e.zValue)})),this.change(t)},change:function(e){var t=this;this.joystickValue=e,this.pending=!0;var o={linear:{x:this.joystickValue.x,y:this.joystickValue.y,z:0},angular:{x:0,y:0,z:this.zValue}};if(this.$robotConfig.get()["enable_parser_json_commands"]&&this.$webSocket.isOpen()){var n={type:"C2R",data:{area:"twist",go:o}};return this.$webSocket.send(n),void(this.pending=!1)}this.axios.post(this.webServerUrl+"/twist/",o).then((function(e){200!==e.status&&t.$toast.error("Failed to send twist. Bad response"),t.pending=!1})).catch((function(){t.$toast.error("Failed to send twist"),t.pending=!1}))},syncControllers:function(){var e,t,o,n;void 0!==(null===(e=this.twistStatus)||void 0===e||null===(t=e.angular)||void 0===t?void 0:t.z)&&0===this.keysDown.length&&(this.zValue=null===(o=this.twistStatus)||void 0===o||null===(n=o.angular)||void 0===n?void 0:n.z)}},watch:{twistStatus:function(){this.syncControllers()}}};o("c5dd");const ct=V()(rt,[["render",Ze],["__scopeId","data-v-78e9bcf8"]]);var lt=ct,ut={name:"App",components:{CollapsibleBlock:Ie,SdkManagement:M,ServomotorsGroup:H,SensorsGroup:ae,RobotActions:ke,GroundMovements:lt},data:function(){return{webServerUrl:"",webSocketUrl:"",robotIP:"",onlyIPMode:!1,loadingRobotConfig:!0,webSocket:null,robotConfig:{},robotConfigAvailable:!1,sdkVersion:null,lastWebSocketStatus:{},hideLastWebSocketStatus:!0,appVersion:"0.7.1",commitSha:""}},mounted:function(){this.commitSha="404b3be7a78af64161dcaefdfd1e9e38029feb5c".substring(0,7),setTimeout(this.readQueryConf,100)},methods:{connectToWebServer:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadingRobotConfig=!0,this.robotConfigAvailable=!1,this.lastWebSocketStatus={},this.robotConfig={},this.$robotConfig.set({}),this.axios.get(this.webServerUrl+"/configuration/").then((function(e){200===e.status?(t.robotConfig=e.data,t.$robotConfig.set(t.robotConfig),e.headers.simplepybotsdk&&(t.sdkVersion=e.headers.simplepybotsdk),Object.keys(t.robotConfig).length>0&&(t.robotConfigAvailable=!0),t.robotConfig.id&&t.robotConfig.name?(t.onlyIPMode=!1,t.loadingRobotConfig=!1,document.title=t.robotConfig.name,t.$toast.success(t.robotConfig.name+" ready")):t.$toast.warning("Bad robot configuration"),t.$router.replace({query:Object(v["a"])(Object(v["a"])({},t.$route.query),{},{webserverurl:t.webServerUrl})}),localStorage.setItem("webServerUrl",t.webServerUrl),setTimeout((function(){null!==t.webSocket&&t.webSocket.readyState===WebSocket.OPEN||t.connectToWebSocket()}),100)):t.$toast.error("Bad response from "+t.webServerUrl+"/configuration/ code "+e.status)})).catch((function(){t.$toast.error("Connection with "+t.webServerUrl+" failed")}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),connectToWebSocket:function(){var e=this,t=this;this.lastWebSocketStatus={},this.webSocket&&(console.log("Close old connection"),this.$webSocket.close(),this.webSocket=null),this.$webSocket.init(this.webSocketUrl+"/"),localStorage.setItem("webSocketUrl",this.webSocketUrl),this.webSocket=this.$webSocket.getInstance(),console.log("Web socket initialized"),this.$router.replace({query:Object(v["a"])(Object(v["a"])({},this.$route.query),{},{websocketurl:this.webSocketUrl})}),this.webSocket.onmessage=function(o){if(o.data instanceof Blob){var n=new FileReader;n.onload=function(){t.onWebSocketMessage(JSON.parse(String(n.result)))},n.readAsText(o.data)}else e.onWebSocketMessage(JSON.parse(o.data))},this.webSocket.onerror=function(){e.$webSocket.close(),e.$toast.warning("Websocket connection error"),e.webSocket=null},this.webSocket.onclose=function(){e.$webSocket.close(),e.$toast.warning("Websocket connection closed"),e.webSocket=null}},closeWebSocket:function(){this.$webSocket.close(),this.$toast.warning("Websocket connection closed"),this.webSocket=null,this.onWebSocketMessage({})},closeDashboard:function(){this.loadingRobotConfig=!0,this.robotConfigAvailable=!1,this.lastWebSocketStatus={},this.robotConfig={},this.$robotConfig.set({}),this.loadingRobotConfig=!1,this.$toast.warning("Dashboard closed")},onWebSocketMessage:function(e){"R2C"===e.type&&e.data&&"status"===e.data.area&&"live_status"===e.data.action&&e.data.value&&(e=e.data.value),e.format?(this.lastWebSocketStatus=e,this.$robotStatus.set(JSON.parse(JSON.stringify(this.lastWebSocketStatus)))):console.warn("Socket message not a robot status")},readQueryConf:function(){this.$route.query.webserverurl?(this.webServerUrl=this.$route.query.webserverurl,this.onlyIPMode=!1):localStorage.getItem("webServerUrl")?(this.webServerUrl=localStorage.getItem("webServerUrl"),this.onlyIPMode=!1):this.onlyIPMode=!0,this.$route.query.websocketurl?this.webSocketUrl=this.$route.query.websocketurl:localStorage.getItem("webSocketUrl")&&(this.webSocketUrl=localStorage.getItem("webSocketUrl")),localStorage.getItem("hideLastWebSocketStatus")&&(this.hideLastWebSocketStatus="true"===localStorage.getItem("hideLastWebSocketStatus")),this.$route.query.autoconnect&&this.connectToWebServer()},setAllCommitSha:function(){this.commitSha="404b3be7a78af64161dcaefdfd1e9e38029feb5c"},webSocketLabelClick:function(){this.hideLastWebSocketStatus=!this.hideLastWebSocketStatus,localStorage.setItem("hideLastWebSocketStatus",this.hideLastWebSocketStatus)},connectFromIP:function(){this.robotIP=this.robotIP.toString().replace(/\s/g,""),this.webServerUrl="http://"+this.robotIP+":8000/api/v1/robot",this.webSocketUrl="ws://"+this.robotIP+":65432",this.connectToWebServer()}}};o("ce35");const bt=V()(ut,[["render",f],["__scopeId","data-v-1ee0aeb9"]]);var dt=bt,gt=o("bc3a"),pt=o.n(gt),ht=o("2106"),ft=o.n(ht),vt=o("6c02"),Ot=o("af56"),jt=Object(s["d"])(dt);jt.use(ft.a,pt.a);var St=[{path:"/SimplePYBotDashboard/",name:"App",component:dt}],mt=Object(vt["a"])({history:Object(vt["b"])(),routes:St});jt.use(mt),jt.use(Ot["a"],{position:"top-right"}),jt.use({install:function(e){var t=Object(s["v"])(null);e.config.globalProperties.$robotConfig={value:t,set:function(e){t.value=e},get:function(){return t.value}}}}),jt.use({install:function(e){var t=Object(s["v"])(null);e.config.globalProperties.$webSocket={value:t,init:function(e){t.value=new WebSocket(e)},close:function(){null!==t.value&&(t.value.close(),t.value=null)},isOpen:function(){return null!==t.value&&t.value.readyState===WebSocket.OPEN},getInstance:function(){return t.value},send:function(e){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o.isOpen()){n.next=3;break}return console.warn("Websocket is closed"),n.abrupt("return");case 3:return n.next=5,t.value.send((new TextEncoder).encode(JSON.stringify(e)));case 5:case"end":return n.stop()}}),n)})))()}}}}),jt.use({install:function(e){var t=Object(s["v"])(null);e.config.globalProperties.$robotStatus={value:t,set:function(e){t.value=e},get:function(){return t.value}}}}),jt.mount("#app")},"648d":function(e,t,o){"use strict";o("775d")},"775d":function(e,t,o){},"7b0f":function(e,t,o){},"96af":function(e,t,o){},acc6:function(e,t,o){"use strict";o("02f4")},b3b3:function(e,t,o){"use strict";o("96af")},c479:function(e,t,o){},c5dd:function(e,t,o){"use strict";o("7b0f")},ce35:function(e,t,o){"use strict";o("ce87")},ce87:function(e,t,o){},d688:function(e,t,o){"use strict";o("c479")},e11a:function(e,t,o){"use strict";o("5392")}});
//# sourceMappingURL=app.07cef5e8.js.map
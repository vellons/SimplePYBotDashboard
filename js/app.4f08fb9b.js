(function(e){function t(t){for(var n,r,i=t[0],c=t[1],l=t[2],b=0,d=[];b<i.length;b++)r=i[b],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,i=1;i<o.length;i++){var c=o[i];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=r(r.s=o[0]))}return e}var n={},a={app:0},s=[];function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/SimplePYBotDashboard/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"02f4":function(e,t,o){},"151e":function(e,t,o){},"19ad":function(e,t,o){"use strict";o("71b7")},"3c97":function(e,t,o){"use strict";o("831c")},4219:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23"),a=Object(n["J"])("data-v-41c3cf96");Object(n["t"])("data-v-41c3cf96");var s=Object(n["h"])("label",{for:"web-server-url",class:"server-label"},"Web server url:",-1),r=Object(n["h"])("br",null,null,-1),i=Object(n["h"])("label",{for:"web-socket-url",class:"server-label"},"Websocket url:",-1),c={key:0},l=Object(n["h"])("br",null,null,-1),u={class:"version-label"},b=Object(n["h"])("br",null,null,-1),d={key:1,class:"version-label"};Object(n["r"])();var g=a((function(e,t,o,g,p,h){var f=Object(n["z"])("SdkManagement"),v=Object(n["z"])("ServomotorsGroup"),j=Object(n["z"])("CollapsibleBlock"),O=Object(n["z"])("RobotActions"),S=Object(n["z"])("GroundMovements"),m=Object(n["z"])("SensorsGroup");return Object(n["q"])(),Object(n["e"])("div",null,[!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(n["q"])(),Object(n["e"])(j,{key:0,id:"motorsGroup",type:"left-toggle",class:"home-collapse"},{header:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(n["q"])(),Object(n["e"])(f,{key:0,robotConfig:e.robotConfig,robotStatus:e.lastWebSocketStatus?e.lastWebSocketStatus:{},version:e.sdkVersion,webServerUrl:e.webServerUrl},null,8,["robotConfig","robotStatus","version","webServerUrl"])):Object(n["f"])("",!0)]})),default:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable&&e.robotConfig.motors?(Object(n["q"])(),Object(n["e"])(v,{key:0,config:e.robotConfig.motors,motorStatus:e.lastWebSocketStatus.motors?e.lastWebSocketStatus.motors:[],webServerUrl:e.webServerUrl},null,8,["config","motorStatus","webServerUrl"])):Object(n["f"])("",!0)]})),_:1})):Object(n["f"])("",!0),!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(n["q"])(),Object(n["e"])(j,{key:1,id:"robotActions","toggle-text":"Actions and Motion",class:"home-collapse"},{default:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(n["q"])(),Object(n["e"])(O,{key:0,webServerUrl:e.webServerUrl,robotConfig:e.robotConfig,robotStatus:e.lastWebSocketStatus?e.lastWebSocketStatus:{}},null,8,["webServerUrl","robotConfig","robotStatus"])):Object(n["f"])("",!0)]})),_:1})):Object(n["f"])("",!0),!e.loadingRobotConfig&&e.robotConfigAvailable&&!0===e.robotConfig.enable_twist_controller?(Object(n["q"])(),Object(n["e"])(j,{key:2,id:"movements","toggle-text":"Ground movements",class:"home-collapse"},{default:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable&&!0===e.robotConfig.enable_twist_controller?(Object(n["q"])(),Object(n["e"])(S,{key:0,config:{},twistStatus:e.lastWebSocketStatus.twist?e.lastWebSocketStatus.twist:{},webServerUrl:e.webServerUrl},null,8,["twistStatus","webServerUrl"])):Object(n["f"])("",!0)]})),_:1})):Object(n["f"])("",!0),!e.loadingRobotConfig&&e.robotConfigAvailable?(Object(n["q"])(),Object(n["e"])(j,{key:3,id:"sensors","toggle-text":"Sensors",class:"home-collapse"},{default:a((function(){return[!e.loadingRobotConfig&&e.robotConfigAvailable&&e.robotConfig.sensors?(Object(n["q"])(),Object(n["e"])(m,{key:0,config:e.robotConfig.sensors,sensorsStatus:e.lastWebSocketStatus.sensors?e.lastWebSocketStatus.sensors:[]},null,8,["config","sensorsStatus"])):Object(n["f"])("",!0)]})),_:1})):Object(n["f"])("",!0),Object(n["h"])(j,{id:"configurations",class:"home-collapse","toggle-text":!e.loadingRobotConfig&&e.robotConfigAvailable?"Configurations":"Dashboard for Simple Python Robot SDK"},{default:a((function(){return[Object(n["h"])("div",null,[s,Object(n["I"])(Object(n["h"])("input",{type:"text",id:"web-server-url","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.webServerUrl=t}),class:"server-input",placeholder:"Insert your robot web server address",disabled:e.robotConfigAvailable},null,8,["disabled"]),[[n["E"],e.webServerUrl]]),e.robotConfigAvailable?(Object(n["q"])(),Object(n["e"])("button",{key:1,onClick:t[3]||(t[3]=function(){return h.closeDashboard&&h.closeDashboard.apply(h,arguments)}),class:"main-button"}," Close dashboard ")):(Object(n["q"])(),Object(n["e"])("button",{key:0,onClick:t[2]||(t[2]=function(){return h.connectToWebServer&&h.connectToWebServer.apply(h,arguments)}),disabled:""===e.webServerUrl,class:"main-button"}," Connect to web server ",8,["disabled"])),r,i,Object(n["I"])(Object(n["h"])("input",{type:"text",id:"web-socket-url","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.webSocketUrl=t}),class:"server-input",placeholder:"Insert your robot websocket address",disabled:null!==e.webSocket},null,8,["disabled"]),[[n["E"],e.webSocketUrl]]),null===e.webSocket?(Object(n["q"])(),Object(n["e"])("button",{key:2,onClick:t[5]||(t[5]=function(){return h.connectToWebSocket&&h.connectToWebSocket.apply(h,arguments)}),disabled:""===e.webSocketUrl,class:"main-button"}," Connect to websocket ",8,["disabled"])):(Object(n["q"])(),Object(n["e"])("button",{key:3,onClick:t[6]||(t[6]=function(){return h.closeWebSocket&&h.closeWebSocket.apply(h,arguments)}),class:"main-button"}," Close websocket "))]),null!==e.webSocket?(Object(n["q"])(),Object(n["e"])("div",c,Object(n["B"])(e.lastWebSocketStatus),1)):Object(n["f"])("",!0),l,Object(n["h"])("div",u,[Object(n["g"])(" Dashboard version: "+Object(n["B"])(e.appVersion)+" ",1),e.commitSha?(Object(n["q"])(),Object(n["e"])("span",{key:0,onClick:t[7]||(t[7]=function(){return h.setAllCommitSha&&h.setAllCommitSha.apply(h,arguments)})},"- "+Object(n["B"])(e.commitSha),1)):Object(n["f"])("",!0)]),b,e.sdkVersion?(Object(n["q"])(),Object(n["e"])("div",d," SDK version: "+Object(n["B"])(e.sdkVersion),1)):Object(n["f"])("",!0)]})),_:1},8,["toggle-text"])])})),p=o("1da1"),h=(o("96cf"),o("b64b"),o("b0c0"),Object(n["J"])("data-v-83771490"));Object(n["t"])("data-v-83771490");var f={class:"sdk-toolbar"},v={key:0,class:"toolbar-item"},j={class:"toolbar-item speed"},O={for:"speed-range",class:"speed-lbl"},S={class:"toolbar-item system"},m={key:0},y={key:1},k={key:2};Object(n["r"])();var w=h((function(e,t,o,a,s,r){var i,c,l;return Object(n["q"])(),Object(n["e"])("div",f,[o.robotConfig.name?(Object(n["q"])(),Object(n["e"])("div",v,[Object(n["h"])("b",null,Object(n["B"])(o.robotConfig.name),1)])):Object(n["f"])("",!0),Object(n["h"])("div",j,[Object(n["h"])("label",O,Object(n["B"])(e.rangeSpeed),1),Object(n["I"])(Object(n["h"])("input",{id:"speed-range",class:"speed-range","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.rangeSpeed=t}),disabled:e.pending,type:"range",min:"0.1",max:"5",step:"0.1",onChange:t[2]||(t[2]=function(){return r.rangeSpeedChanged&&r.rangeSpeedChanged.apply(r,arguments)}),onFocusin:t[3]||(t[3]=function(t){return e.rangeSpeedDrag=!0}),onFocusout:t[4]||(t[4]=function(t){return e.rangeSpeedDrag=!1})},null,40,["disabled"]),[[n["E"],e.rangeSpeed]])]),Object(n["h"])("div",S,[null!==(i=o.robotStatus.system)&&void 0!==i&&i.temperature?(Object(n["q"])(),Object(n["e"])("span",m,Object(n["B"])((null===(c=o.robotStatus.system)||void 0===c?void 0:c.temperature)+"Â°C - "),1)):Object(n["f"])("",!0),null!==(l=o.robotStatus.system)&&void 0!==l&&l.timestamp?(Object(n["q"])(),Object(n["e"])("span",y,"(Delay:"+Object(n["B"])(e.statusDelay)+" sec) - "+Object(n["B"])(e.formattedDate),1)):(Object(n["q"])(),Object(n["e"])("span",k,"Connect with websocket to receive realtime data"))])])})),C=(o("b680"),{name:"SdkManagement",props:{webServerUrl:{type:String,required:!0},robotConfig:{type:Object,required:!0},robotStatus:{type:Object,required:!0},version:{type:String,default:""}},data:function(){return{currentSpeed:1,rangeSpeed:1,rangeSpeedDrag:!1,pending:!1,formattedDate:"",statusDelay:0}},mounted:function(){var e;this.currentSpeed=null===(e=this.robotStatus.sdk)||void 0===e?void 0:e.robot_speed,this.rangeSpeed=this.currentSpeed?this.currentSpeed:1},methods:{rangeSpeedChanged:function(){var e=this;this.pending=!0;var t={robot_speed:parseFloat(this.rangeSpeed)};this.axios.patch(this.webServerUrl+"/sdk/",t).then((function(t){200!==t.status&&(e.$toast.error("Failed to change speed to "+e.rangeSpeed+". Bad response"),e.rangeSpeed=e.currentSpeed),e.pending=!1})).catch((function(){e.$toast.error("Failed to change speed to "+e.rangeSpeed),e.rangeSpeed=e.currentSpeed,e.pending=!1}))}},watch:{robotStatus:function(){var e,t,o;if(this.currentSpeed=null===(e=this.robotStatus.sdk)||void 0===e?void 0:e.robot_speed,this.currentSpeed&&!this.rangeSpeedDrag&&(this.rangeSpeed=parseFloat(this.currentSpeed)),null!==(t=this.robotStatus)&&void 0!==t&&null!==(o=t.system)&&void 0!==o&&o.timestamp){var n=new Date(this.robotStatus.system.timestamp);this.statusDelay=((Date.now()-n)/1e3).toFixed(3),this.formattedDate=("0"+n.getHours()).substr(-2)+":"+("0"+n.getMinutes()).substr(-2)+":"+("0"+n.getSeconds()).substr(-2)+":"+(n.getMilliseconds()+"000").substr(0,3)}}}}),x=(o("acc6"),o("d959")),q=o.n(x);const V=q()(C,[["render",w],["__scopeId","data-v-83771490"]]);var A=V,U=(o("7db0"),Object(n["J"])("data-v-16153e0b"));Object(n["t"])("data-v-16153e0b");var _={class:"servomotor-group-container"};Object(n["r"])();var T=U((function(e,t,o,a,s,r){var i=Object(n["z"])("ServoMotor");return Object(n["q"])(),Object(n["e"])("div",_,[(Object(n["q"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(o.config,(function(e,t,a){return Object(n["q"])(),Object(n["e"])(i,{class:["servomotor",{"servomotor-big":0===a&&Object.keys(o.config).length%2===1}],key:t,webServerUrl:o.webServerUrl,config:e,motorKey:t,socketGoalValue:o.motorStatus.find((function(e){return e.key===t}))?o.motorStatus.find((function(e){return e.key===t})).goal_angle:0,socketCurrentValue:o.motorStatus.find((function(e){return e.key===t}))?o.motorStatus.find((function(e){return e.key===t})).current_angle:null},null,8,["class","webServerUrl","config","motorKey","socketGoalValue","socketCurrentValue"])})),128))])})),P=Object(n["J"])("data-v-b9aadc66");Object(n["t"])("data-v-b9aadc66");var I={class:"servomotor"},G={class:"infos"},B={class:"info-title"},M=Object(n["g"])(" | "),W={class:"info-angle"},$={class:"inputs-row"},D={class:"inputs-wrap"},J=Object(n["h"])("label",{class:"sr-only",for:"goal"},null,-1),R=Object(n["h"])("label",{class:"sr-only",for:"current"},null,-1);Object(n["r"])();var F=P((function(e,t,o,a,s,r){return Object(n["q"])(),Object(n["e"])("div",I,[Object(n["h"])("div",G,[Object(n["h"])("button",{disabled:e.pending||parseInt(o.config.angle_limit[0])>parseInt(e.rangeGoalAngle)-e.stepValue,onClick:t[1]||(t[1]=function(t){return r.removeStep(e.stepValue)})},"-"+Object(n["B"])(e.stepValue),9,["disabled"]),Object(n["h"])("button",{disabled:e.pending||parseInt(o.config.angle_limit[0])>parseInt(e.rangeGoalAngle)-e.stepValueSmall,onClick:t[2]||(t[2]=function(t){return r.removeStep(e.stepValueSmall)})},"-"+Object(n["B"])(e.stepValueSmall),9,["disabled"]),Object(n["h"])("span",B,Object(n["B"])(o.motorKey),1),M,Object(n["h"])("span",W,Object(n["B"])(e.rangeGoalAngle),1),o.config.angle_limit[0]<=0&&o.config.angle_limit[1]>=0?(Object(n["q"])(),Object(n["e"])("button",{key:0,disabled:e.pending||0===parseInt(e.rangeGoalAngle),onClick:t[3]||(t[3]=function(){return r.goToZero&&r.goToZero.apply(r,arguments)})},"0 ",8,["disabled"])):Object(n["f"])("",!0),Object(n["h"])("button",{disabled:e.pending||parseInt(o.config.angle_limit[1])<parseInt(e.rangeGoalAngle)+e.stepValueSmall,onClick:t[4]||(t[4]=function(t){return r.addStep(e.stepValueSmall)})},"+"+Object(n["B"])(e.stepValueSmall),9,["disabled"]),Object(n["h"])("button",{disabled:e.pending||parseInt(o.config.angle_limit[1])<parseInt(e.rangeGoalAngle)+e.stepValue,onClick:t[5]||(t[5]=function(t){return r.addStep(e.stepValue)})},"+"+Object(n["B"])(e.stepValue),9,["disabled"])]),Object(n["h"])("div",$,[Object(n["h"])("div",{class:"input-limit",onClick:t[6]||(t[6]=function(){return r.goToMin&&r.goToMin.apply(r,arguments)})},Object(n["B"])(o.config.angle_limit[0]),1),Object(n["h"])("div",D,[J,Object(n["I"])(Object(n["h"])("input",{id:"goal",class:"goal-input",type:"range",onChange:t[7]||(t[7]=function(){return r.rangeGoalChanged&&r.rangeGoalChanged.apply(r,arguments)}),min:o.config.angle_limit[0],"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.rangeGoalAngle=t}),max:o.config.angle_limit[1],step:1},null,40,["min","max"]),[[n["E"],e.rangeGoalAngle]]),R,null!=o.socketCurrentValue?Object(n["I"])((Object(n["q"])(),Object(n["e"])("input",{key:0,id:"current",class:"current-input",type:"range",disabled:"",min:o.config.angle_limit[0],"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.rangeCurrentAngle=t}),max:o.config.angle_limit[1],step:1},null,8,["min","max"])),[[n["E"],e.rangeCurrentAngle]]):Object(n["f"])("",!0)]),Object(n["h"])("div",{class:"input-limit",onClick:t[10]||(t[10]=function(){return r.goToMax&&r.goToMax.apply(r,arguments)})},Object(n["B"])(o.config.angle_limit[1]),1)])])})),E={name:"ServoMotor",props:{webServerUrl:{type:String,required:!0},config:{type:Object,required:!0},motorKey:{required:!0},socketGoalValue:{default:0},socketCurrentValue:{default:0}},data:function(){return{rangeCurrentAngle:0,rangeGoalAngle:0,stepValueSmall:1,stepValue:5,pending:!1}},mounted:function(){this.rangeGoalAngle=this.socketGoalValue,this.rangeCurrentAngle=this.socketCurrentValue},methods:{rangeGoalChanged:function(){var e=this;this.pending=!0;var t=parseInt(this.rangeGoalAngle);console.log(this.motorKey,t);var o={goal_angle:t};this.axios.patch(this.webServerUrl+"/motors/"+this.motorKey+"/",o).then((function(o){200!==o.status&&e.$toast.error("Failed to move "+e.motorKey+" to "+t+". Bad response"),e.pending=!1})).catch((function(){e.$toast.error("Failed to move "+e.motorKey+" to "+t),e.pending=!1}))},goToZero:function(){this.rangeGoalAngle=0,this.rangeGoalChanged()},removeStep:function(e){this.rangeGoalAngle=parseInt(this.rangeGoalAngle)-e,this.rangeGoalChanged()},addStep:function(e){this.rangeGoalAngle=parseInt(this.rangeGoalAngle)+e,this.rangeGoalChanged()},goToMin:function(){this.pending||this.rangeGoalAngle===this.config.angle_limit[0]||(this.rangeGoalAngle=this.config.angle_limit[0],this.rangeGoalChanged())},goToMax:function(){this.pending||this.rangeGoalAngle===this.config.angle_limit[1]||(this.rangeGoalAngle=this.config.angle_limit[1],this.rangeGoalChanged())}},watch:{socketGoalValue:function(){this.rangeGoalAngle=this.socketGoalValue},socketCurrentValue:function(){this.rangeCurrentAngle=this.socketCurrentValue}}};o("a863");const z=q()(E,[["render",F],["__scopeId","data-v-b9aadc66"]]);var N=z,K={name:"ServomotorsGroup",components:{ServoMotor:N},props:{webServerUrl:{type:String,required:!0},config:{type:Object,required:!0},motorStatus:{type:Array,required:!0}}};o("3c97");const L=q()(K,[["render",T],["__scopeId","data-v-16153e0b"]]);var Y=L,X=Object(n["J"])("data-v-7d9e03a8");Object(n["t"])("data-v-7d9e03a8");var Z={class:"sensors-group-container"};Object(n["r"])();var Q=X((function(e,t,o,a,s,r){return Object(n["q"])(),Object(n["e"])("div",Z,[(Object(n["q"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(o.config,(function(e,t){return Object(n["q"])(),Object(n["e"])("div",{class:"sensors",key:t},[Object(n["h"])("b",null,Object(n["B"])(t),1),Object(n["g"])(": "+Object(n["B"])(o.sensorsStatus.find((function(e){return e.key===t}))?o.sensorsStatus.find((function(e){return e.key===t})).value:"-"),1)])})),128))])})),H={name:"SensorsGroup",props:{config:{type:Object,required:!0},sensorsStatus:{type:Array,required:!0}}};o("d688");const ee=q()(H,[["render",Q],["__scopeId","data-v-7d9e03a8"]]);var te=ee,oe=Object(n["J"])("data-v-14d26a8f");Object(n["t"])("data-v-14d26a8f");var ne={class:"robot-actions"},ae={key:0,class:"robot-actions-item robot-poses"},se=Object(n["h"])("div",{class:"robot-actions-item-title"},"Poses:",-1),re=Object(n["h"])("option",{disabled:"",value:""},"Poses",-1),ie={class:"robot-actions-item"},ce=Object(n["h"])("div",{class:"robot-actions-item-title"},"Point to point:",-1);Object(n["r"])();var le=oe((function(e,t,o,a,s,r){return Object(n["q"])(),Object(n["e"])("div",ne,[e.motionConfig.poses?(Object(n["q"])(),Object(n["e"])("div",ae,[se,Object(n["h"])("label",null,[Object(n["I"])(Object(n["h"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedPose=t}),style:{"min-width":"200px"}},[re,(Object(n["q"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(e.motionConfig.poses,(function(e,t){return Object(n["q"])(),Object(n["e"])("option",{key:t,value:t},Object(n["B"])(t),9,["value"])})),128))],512),[[n["D"],e.selectedPose]])]),Object(n["h"])("label",null,[""!==e.selectedPose?Object(n["I"])((Object(n["q"])(),Object(n["e"])("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.poseSeconds=t}),class:"robot-actions-input",type:"number",min:"0",max:"120",placeholder:"seconds"},null,512)),[[n["E"],e.poseSeconds]]):Object(n["f"])("",!0)]),""!==e.selectedPose?(Object(n["q"])(),Object(n["e"])("button",{key:0,onClick:t[3]||(t[3]=function(){return r.goToPose&&r.goToPose.apply(r,arguments)}),disabled:e.pending}," Go to "+Object(n["B"])(e.selectedPose)+" in "+Object(n["B"])(e.poseSeconds)+" seconds ",9,["disabled"])):Object(n["f"])("",!0)])):Object(n["f"])("",!0),Object(n["h"])("div",ie,[ce,Object(n["h"])("label",null,[Object(n["I"])(Object(n["h"])("textarea",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.pointToPointMotors=t}),rows:e.textAreaRows,cols:"40",class:"motors-text-area"},null,8,["rows"]),[[n["E"],e.pointToPointMotors]])]),Object(n["h"])("label",null,[""!==e.pointToPointMotors?Object(n["I"])((Object(n["q"])(),Object(n["e"])("input",{key:0,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.pointToPointSeconds=t}),class:"robot-actions-input",type:"number",min:"0",max:"120",placeholder:"seconds"},null,512)),[[n["E"],e.pointToPointSeconds]]):Object(n["f"])("",!0)]),""!==e.pointToPointMotors?(Object(n["q"])(),Object(n["e"])("button",{key:0,onClick:t[6]||(t[6]=function(){return r.movePointToPoint&&r.movePointToPoint.apply(r,arguments)}),style:{height:"22px"},disabled:e.pending}," Move point to point in "+Object(n["B"])(e.pointToPointSeconds)+" seconds ",9,["disabled"])):Object(n["f"])("",!0),Object(n["h"])("button",{onClick:t[7]||(t[7]=function(){return r.copyCurrentPosition&&r.copyCurrentPosition.apply(r,arguments)}),style:{height:"22px"},disabled:e.pending}," Copy current position ",8,["disabled"])])])})),ue=o("3835"),be=o("5530"),de=(o("4fad"),o("a1e9")),ge={name:"RobotActions",props:{webServerUrl:{type:String,required:!0},robotConfig:{type:Object,required:!0},robotStatus:{type:Object,required:!0}},data:function(){return{motionConfig:{},selectedPose:"",poseSeconds:0,pointToPointMotors:"",pointToPointSeconds:0,textAreaRows:4,pending:!1}},mounted:function(){this.getMotionInfo()},methods:{getMotionInfo:function(){var e=this;this.robotConfig.poses&&(this.motionConfig.poses=this.robotConfig.poses),this.axios.get(this.webServerUrl+"/motion/").then((function(t){200===t.status?e.motionConfig=t.data:e.$toast.error("Bad response from "+e.webServerUrl+"/motion/. Code "+t.status)})).catch((function(){}))},goToPose:function(){var e=this;""===this.poseSeconds&&(this.poseSeconds=0);var t=this.selectedPose;this.selectedPose="",this.pending=!0;var o={seconds:parseFloat(this.poseSeconds)};this.axios.post(this.webServerUrl+"/go-to-pose/"+t+"/",o).then((function(o){200!==o.status&&e.$toast.error("Failed to go to pose "+t+". Bad response"),e.pending=!1})).catch((function(){e.$toast.error("Failed to go to pose "+t),e.pending=!1}))},movePointToPoint:function(){var e=this;if(""===this.pointToPointSeconds&&(this.pointToPointSeconds=0),this.isJsonString(this.pointToPointMotors)){this.pending=!0;var t=Object(be["a"])({seconds:parseFloat(this.pointToPointSeconds)},JSON.parse(this.pointToPointMotors));this.axios.post(this.webServerUrl+"/move-point-to-point/",t).then((function(t){200!==t.status&&e.$toast.error("Failed to move point to point. Bad response"),e.pending=!1})).catch((function(){e.$toast.error("Failed to go to move point to point"),e.pending=!1}))}else this.$toast.warning("Insert a valid JSON")},copyCurrentPosition:function(){var e=this,t=Object(de["o"])(this.robotStatus),o=Object(de["o"])(this.robotConfig)["motors"],n={};this.textAreaRows=2;for(var a=function(){var o=Object(ue["a"])(r[s],1),a=o[0];t["motors"]&&t["motors"].find((function(e){return e.key===a})).goal_angle?n[a]=t["motors"].find((function(e){return e.key===a})).goal_angle:n[a]=0,e.textAreaRows++},s=0,r=Object.entries(o);s<r.length;s++)a();this.pointToPointMotors=JSON.stringify(n,null,2)},isJsonString:function(e){try{JSON.parse(e)}catch(t){return!1}return!0}}};o("7979");const pe=q()(ge,[["render",le],["__scopeId","data-v-14d26a8f"]]);var he=pe,fe=Object(n["J"])("data-v-4be70c38");Object(n["t"])("data-v-4be70c38");var ve={class:"collapsible-block"},je={class:"collapsible-content"},Oe={class:"content-inner"};Object(n["r"])();var Se=fe((function(e,t,o,a,s,r){return Object(n["q"])(),Object(n["e"])("div",ve,[Object(n["h"])("input",{id:o.id,class:"toggle",type:"checkbox",checked:o.checked},null,8,["id","checked"]),"lbl-toggle-text"===o.type?(Object(n["q"])(),Object(n["e"])("label",{key:0,for:o.id,class:["lbl-toggle",[o.type]]},Object(n["B"])(o.toggleText),11,["for"])):Object(n["f"])("",!0),"left-toggle"===o.type?(Object(n["q"])(),Object(n["e"])("label",{key:1,for:o.id,class:["lbl-toggle",[o.type]]},[Object(n["y"])(e.$slots,"header",{},void 0,!0)],10,["for"])):Object(n["f"])("",!0),Object(n["h"])("div",je,[Object(n["h"])("div",Oe,[Object(n["y"])(e.$slots,"default",{},void 0,!0)])])])})),me={name:"CollapsibleBlock",props:{id:{type:String,required:!0},checked:{type:Boolean,default:!0},type:{type:String,default:"lbl-toggle-text"},toggleText:{type:String,default:"Toggle"}}};o("d715");const ye=q()(me,[["render",Se],["__scopeId","data-v-4be70c38"]]);var ke=ye,we=Object(n["J"])("data-v-5fb4798f");Object(n["t"])("data-v-5fb4798f");var Ce={class:"movements"},xe={class:"left-area"},qe={class:"area-group"},Ve=Object(n["h"])("div",{class:"axis-label"},"Joystick X:",-1),Ae={class:"axis-value"},Ue={class:"area-group"},_e=Object(n["h"])("div",{class:"axis-label"},"Joystick Y:",-1),Te={class:"axis-value"},Pe={class:"right-area data-area"},Ie={class:"area-group"},Ge=Object(n["h"])("div",{class:"data-label"},"Linear:",-1),Be={class:"data-value"},Me={class:"area-group data-area"},We=Object(n["h"])("div",{class:"data-label"},"Angular:",-1),$e={class:"data-value"};Object(n["r"])();var De=we((function(e,t,o,a,s,r){var i=Object(n["z"])("Joystick");return Object(n["q"])(),Object(n["e"])("div",Ce,[Object(n["h"])("div",xe,[Object(n["h"])("div",qe,[Ve,Object(n["h"])("div",Ae,Object(n["B"])(e.joystickValue.x?e.joystickValue.x:0),1)]),Object(n["h"])("div",Ue,[_e,Object(n["h"])("div",Te,Object(n["B"])(e.joystickValue.y?e.joystickValue.y:0),1)])]),Object(n["h"])(i,{class:"joystick-container",idx:"controller1",onChange:r.change},null,8,["onChange"]),Object(n["h"])("div",Pe,[Object(n["h"])("div",Ie,[Ge,Object(n["h"])("div",Be,Object(n["B"])(o.twistStatus.linear?o.twistStatus.linear:"-"),1)]),Object(n["h"])("div",Me,[We,Object(n["h"])("div",$e,Object(n["B"])(o.twistStatus.angular?o.twistStatus.angular:"-"),1)])])])})),Je={style:{width:"128px",position:"relative"}},Re=Object(n["h"])("img",{src:"images/joystick-base.png",alt:""},null,-1),Fe=Object(n["h"])("img",{src:"images/joystick-red.png",alt:""},null,-1);function Ee(e,t,o,a,s,r){return Object(n["q"])(),Object(n["e"])("div",{id:"joystick_"+o.idx},[Object(n["h"])("div",Je,[Re,Object(n["h"])("div",{id:o.idx+"_stick",style:{position:"absolute",left:"32px",top:"32px"}},[Fe],8,["id"])])],8,["id"])}var ze=o("d4ec"),Ne=(o("4057"),o("99af"),o("a9e3"),function e(t,o,n){Object(ze["a"])(this,e),this.id=t;var a=document.getElementById(t);this.dragStart=null,this.touchId=null,this.active=!1,this.value={x:0,y:0};var s=this;function r(e){s.active=!0,a.style.transition="0s",e.preventDefault(),e.changedTouches?s.dragStart={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:s.dragStart={x:e.clientX,y:e.clientY},e.changedTouches&&(s.touchId=e.changedTouches[0].identifier)}function i(e){if(s.active){var t=null;if(e.changedTouches){for(var r=0;r<e.changedTouches.length;r++)s.touchId===e.changedTouches[r].identifier&&(t=r,e.clientX=e.changedTouches[r].clientX,e.clientY=e.changedTouches[r].clientY);if(null==t)return}var i=e.clientX-s.dragStart.x,c=e.clientY-s.dragStart.y,l=Math.atan2(c,i),u=Math.min(o,Math.hypot(i,c)),b=u*Math.cos(l),d=u*Math.sin(l);a.style.transform="translate3d(".concat(b,"px, ").concat(d,"px, 0px)");var g=u<n?0:o/(o-n)*(u-n),p=g*Math.cos(l),h=g*Math.sin(l),f=parseFloat((p/o).toFixed(3)),v=parseFloat((h/o).toFixed(3));s.value={x:f,y:-v}}}function c(e){s.active&&(e.changedTouches&&s.touchId!==e.changedTouches[0].identifier||(a.style.transition="0.2s",a.style.transform="translate3d(0px, 0px, 0px)",s.value={x:0,y:0},s.touchId=null,s.active=!1))}a.addEventListener("mousedown",r),a.addEventListener("touchstart",r),document.addEventListener("mousemove",i,{passive:!1}),document.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("mouseup",c),document.addEventListener("touchend",c)}),Ke={name:"Joystick",props:{idx:{type:String,required:!0},refreshInterval:{type:Number,default:333}},data:function(){return{joystick1:null,lastValue:{},value:{},lastChanged:(new Date).valueOf()+1e3}},mounted:function(){console.log("Joystick "+this.idx+" mounted"),this.joystick1=new Ne(this.idx+"_stick",52,8),this.lastValue=this.joystick1.value,this.value=this.lastValue,this.joystickLoop()},methods:{update:function(){this.lastValue=this.joystick1.value,this.lastValue!==this.value&&this.lastChanged+this.refreshInterval<(new Date).valueOf()?(this.lastChanged=(new Date).valueOf(),this.value=this.lastValue,this.$emit("change",this.value)):0!==this.lastValue.x||0!==this.lastValue.y||this.value.x===this.lastValue.x&&this.value.y===this.lastValue.y||(this.lastChanged=(new Date).valueOf(),this.value=this.lastValue,this.$emit("change",this.value))},joystickLoop:function(){requestAnimationFrame(this.joystickLoop),this.update()}}};const Le=q()(Ke,[["render",Ee]]);var Ye=Le,Xe={name:"GroundMovements",components:{Joystick:Ye},props:{webServerUrl:{type:String,required:!0},config:{type:Object,required:!0},twistStatus:{type:Object,required:!0}},data:function(){return{joystick1:null,joystickValue:{},pending:!1}},methods:{change:function(e){var t=this;this.joystickValue=e,this.pending=!0;var o={linear:{x:this.joystickValue.x,y:this.joystickValue.y,z:0},angular:{x:0,y:0,z:0}};this.axios.post(this.webServerUrl+"/twist/",o).then((function(e){200!==e.status&&t.$toast.error("Failed to send twist. Bad response"),t.pending=!1})).catch((function(){t.$toast.error("Failed to send twist"),t.pending=!1}))}}};o("19ad");const Ze=q()(Xe,[["render",De],["__scopeId","data-v-5fb4798f"]]);var Qe=Ze,He={name:"App",components:{CollapsibleBlock:ke,SdkManagement:A,ServomotorsGroup:Y,SensorsGroup:te,RobotActions:he,GroundMovements:Qe},data:function(){return{webServerUrl:"",webSocketUrl:"",loadingRobotConfig:!0,webSocket:null,robotConfig:{},robotConfigAvailable:!1,sdkVersion:null,lastWebSocketStatus:{},appVersion:"0.5.0",commitSha:""}},mounted:function(){this.commitSha="784a3213de520ace0923428483f39435d02dc1a7".substring(0,7),setTimeout(this.readQueryConf,100)},methods:{connectToWebServer:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadingRobotConfig=!0,this.robotConfigAvailable=!1,this.lastWebSocketStatus={},this.robotConfig={},this.axios.get(this.webServerUrl+"/configuration/").then((function(e){200===e.status?(t.robotConfig=e.data,e.headers.simplepybotsdk&&(t.sdkVersion=e.headers.simplepybotsdk),Object.keys(t.robotConfig).length>0&&(t.robotConfigAvailable=!0),t.robotConfig.id&&t.robotConfig.name?(t.loadingRobotConfig=!1,t.$toast.success(t.robotConfig.name+" ready")):t.$toast.warning("Bad robot configuration"),localStorage.setItem("webServerUrl",t.webServerUrl)):t.$toast.error("Bad response from "+t.webServerUrl+"/configuration/ code "+e.status)})).catch((function(){t.$toast.error("Connection with "+t.webServerUrl+" failed")}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),connectToWebSocket:function(){var e=this,t=this;this.lastWebSocketStatus={},this.webSocket&&(console.log("Close old connection"),this.$webSocket.close(),this.webSocket=null),localStorage.setItem("webSocketUrl",this.webSocketUrl),this.$webSocket.init(this.webSocketUrl+"/"),this.webSocket=this.$webSocket.getInstance(),console.log("Web socket initialized"),this.webSocket.onmessage=function(o){if(o.data instanceof Blob){var n=new FileReader;n.onload=function(){t.onWebSocketMessage(JSON.parse(String(n.result)))},n.readAsText(o.data)}else e.onWebSocketMessage(JSON.parse(o.data))},this.webSocket.onerror=function(){e.$webSocket.close(),e.$toast.warning("Websocket connection error"),e.webSocket=null},this.webSocket.onclose=function(){e.$webSocket.close(),e.$toast.warning("Websocket connection closed"),e.webSocket=null}},closeWebSocket:function(){this.$webSocket.close(),this.$toast.warning("Websocket connection closed"),this.webSocket=null,this.onWebSocketMessage({})},closeDashboard:function(){this.loadingRobotConfig=!0,this.robotConfigAvailable=!1,this.lastWebSocketStatus={},this.robotConfig={},this.loadingRobotConfig=!1,this.$toast.warning("Dashboard closed")},onWebSocketMessage:function(e){this.lastWebSocketStatus=e,this.$robotStatus.set(JSON.parse(JSON.stringify(this.lastWebSocketStatus)))},readQueryConf:function(){this.$route.query.webserverurl?this.webServerUrl=this.$route.query.webserverurl:localStorage.getItem("webServerUrl")&&(this.webServerUrl=localStorage.getItem("webServerUrl")),this.$route.query.websocketurl?this.webSocketUrl=this.$route.query.websocketurl:localStorage.getItem("webSocketUrl")&&(this.webSocketUrl=localStorage.getItem("webSocketUrl")),this.$route.query.autoconnect&&this.connectToWebServer()},setAllCommitSha:function(){this.commitSha="784a3213de520ace0923428483f39435d02dc1a7"}}};o("f093");const et=q()(He,[["render",g],["__scopeId","data-v-41c3cf96"]]);var tt=et,ot=o("bc3a"),nt=o.n(ot),at=o("2106"),st=o.n(at),rt=o("6c02"),it=o("af56"),ct=Object(n["d"])(tt);ct.use(st.a,nt.a);var lt=[{path:"/SimplePYBotDashboard/",name:"App",component:tt}],ut=Object(rt["a"])({history:Object(rt["b"])(),routes:lt});ct.use(ut),ct.use(it["a"],{position:"top-right"}),ct.use({install:function(e){var t=Object(n["v"])(null);e.config.globalProperties.$webSocket={value:t,init:function(e){t.value=new WebSocket(e)},close:function(){null!==t.value&&(t.value.close(),t.value=null)},isOpen:function(){return null!==t.value&&t.value.readyState===WebSocket.OPEN},getInstance:function(){return t.value},send:function(e){this.isOpen()?t.value.send((new TextEncoder).encode(JSON.stringify(e))):console.warn("Websocket is closed")}}}}),ct.use({install:function(e){var t=Object(n["v"])(null);e.config.globalProperties.$robotStatus={value:t,set:function(e){t.value=e},get:function(){return t.value}}}}),ct.mount("#app")},"71b7":function(e,t,o){},7979:function(e,t,o){"use strict";o("d716")},"7e79":function(e,t,o){},"831c":function(e,t,o){},a863:function(e,t,o){"use strict";o("151e")},acc6:function(e,t,o){"use strict";o("02f4")},c479:function(e,t,o){},d688:function(e,t,o){"use strict";o("c479")},d715:function(e,t,o){"use strict";o("4219")},d716:function(e,t,o){},f093:function(e,t,o){"use strict";o("7e79")}});
//# sourceMappingURL=app.4f08fb9b.js.map